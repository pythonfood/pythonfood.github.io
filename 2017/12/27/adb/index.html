<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>adb | PythonFood</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    <meta name="keywords" content="python food,Python Food," />
  
  <meta name="description" content="adb常用命令笔记。">
<meta name="keywords" content="adb">
<meta property="og:type" content="article">
<meta property="og:title" content="adb">
<meta property="og:url" content="http://pythonfood.github.io/2017/12/27/adb/index.html">
<meta property="og:site_name" content="PythonFood">
<meta property="og:description" content="adb常用命令笔记。">
<meta property="og:image" content="http://pythonfood.github.io/2017/12/27/adb/adb连接逻辑图.png">
<meta property="og:image" content="http://pythonfood.github.io/2017/12/27/adb/adb架构图.png">
<meta property="og:updated_time" content="2018-05-08T07:53:34.165Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="adb">
<meta name="twitter:description" content="adb常用命令笔记。">
<meta name="twitter:image" content="http://pythonfood.github.io/2017/12/27/adb/adb连接逻辑图.png">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  <script src="/js/pace.min.js"></script>
  

  
  

</head>

<body>
  <div id="container">
      <header id="header">
    <div id="banner"></div>
    <div id="header-outer">
        <div id="header-menu" class="header-menu-pos animated">
            <div class="header-menu-container">
                <a href="/" class="left">
                    <span class="site-title">Python Food</span>
                </a>
                <nav id="header-menu-nav" class="right">
                    
                    <a  href="/">
                        <i class="fa fa-home"></i>
                        <span>Home</span>
                    </a>
                    
                    <a  href="/archives">
                        <i class="fa fa-archive"></i>
                        <span>Archives</span>
                    </a>
                    
                    <a  href="/about">
                        <i class="fa fa-user"></i>
                        <span>About</span>
                    </a>
                    
                </nav>
                <a class="mobile-header-menu-button">
                    <i class="fa fa-bars"></i>
                </a>
            </div>
        </div>
        <div id="header-row">
            <div id="logo">
                <a href="/">
                    <img src="/images/logo.png" alt="logo">
                </a>
            </div>
            <div class="header-info">
                <div id="header-title">
                    
                    <h2>
                        Python Food
                    </h2>
                    
                </div>
                <div id="header-description">
                    
                    <h3>
                        A snake that grows up slowly
                    </h3>
                    
                </div>
            </div>
            <nav class="header-nav">
                <div class="social">
                    
                        <a title="Home" target="_blank" href="//pythonfood.github.io">
                            <i class="fa fa-home fa-2x"></i></a>
                    
                        <a title="Github" target="_blank" href="//github.com/pythonfood">
                            <i class="fa fa-github fa-2x"></i></a>
                    
                </div>
            </nav>
        </div>
    </div>
</header>
      <div class="outer">
        <section id="main" class="body-wrap"><article id="post-adb" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="post-title" itemprop="name">
      adb
    </h1>
    <div class="post-title-bar">
      <ul>
          
        <li>
          <i class="fa fa-calendar"></i>  2017-12-27
        </li>
        <li>
          <i class="fa fa-eye"></i>
          <span id="busuanzi_value_page_pv"></span>
        </li>
      </ul>
    </div>
  

          
      </header>
    
    <div class="article-entry post-content" itemprop="articleBody">
      
            
            <p>adb常用命令笔记。<br><a id="more"></a></p>
<h2 id="一、adb简介"><a href="#一、adb简介" class="headerlink" title="一、adb简介"></a>一、adb简介</h2><p>adb（Android debug bridge），意为调试Android设备的桥梁。主要存放在sdk安装目录下的platform-tools文件夹中。可以管理、调试Emulator(模拟机)或Device(安卓真机)。adb是一个C/S架构的应用程序,由三部分组成：</p>
<ul>
<li>adb client：adb 客户端，在PC上运行。</li>
<li>adb server：adb 服务端，在PC上运行。</li>
<li>adb daemon：adbd 守护进程，在Emulator或Device上运行。</li>
</ul>
<p><strong>1、adb server与adb client的连接</strong><br>当adb server启动时，会绑定到本地的5037（tcp）端口，通过此端口监听从adb client发来的信息。</p>
<p><strong>2、adb server与adb daemon的连接</strong><br>adb server与Emulator(或Device)连接时使用两个(一组)端口进行：</p>
<ul>
<li>一个奇数的5555，先建立adb server与adbd的连接通信。</li>
<li>一个为偶数的5554，再建立与Emulator(或Device)的交互连接。</li>
</ul>
<p>ps:adb server通过扫描5555—5585之间的奇数端口搜索adb daemon，进行adb连接；而用相应的偶数端口(奇数端口号-1，如5555对应5554)进行Emulator或Device实例的连接。也正因为每个设备都分一组两个端口，所以adb连接手机的最大数量为16。 </p>
<p><strong>3、adb连接逻辑图</strong></p>
<p><img src="/2017/12/27/adb/adb连接逻辑图.png" alt="adb连接逻辑图"></p>
<p><strong>4、adb架构图</strong></p>
<p><img src="/2017/12/27/adb/adb架构图.png" alt="adb架构图"></p>
<h2 id="二、adb安装"><a href="#二、adb安装" class="headerlink" title="二、adb安装"></a>二、adb安装</h2><p>(1)下载adb安装包：<a href="http://adbshell.com/downloads" target="_blank" rel="noopener">http://adbshell.com/downloads</a><br>(2)将安装包解压到电脑自定义路径下。<br>(3)配置系统环境变量，例如：D:\Program Files\adb<br>(4)测试是否安装成功，cmd输入命令<code>adb</code>查看adb版本。</p>
<h2 id="三、adb基本用法"><a href="#三、adb基本用法" class="headerlink" title="三、adb基本用法"></a>三、adb基本用法</h2><p><strong>1、adb命令的基本语法</strong><br><code>adb [-d|-e|-s &lt;serialNumber&gt;] &lt;command&gt;</code></p>
<ul>
<li><code>-d</code>    指定当前唯一通过 USB 连接的 Android 设备为命令目标</li>
<li><code>-e</code>    指定当前唯一运行的模拟器为命令目标</li>
<li><code>-s &lt;serialNumber&gt;</code>    指定相应serialNumber号的设备/模拟器为命令目标</li>
</ul>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 查看serialNumber</span><br><span class="line">$ adb devices</span><br><span class="line"></span><br><span class="line">List of devices attached</span><br><span class="line">cf264b8f	device</span><br><span class="line">emulator-5554	device</span><br><span class="line">10.129.164.6:5555	device</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>2、启动/停止adb server</strong><br><code>adb start-server</code>：启动 adb server<br><code>adb kill-server</code>：停止 adb server </p>
<p><strong>3、指定adb server网络端口</strong><br><code>adb -P &lt;port&gt; start-server</code> # 默认端口为5037</p>
<p><strong>4、查看 adb 版本</strong><br><code>adb version</code></p>
<p><strong>5、root权限</strong><br><code>adb root</code> ：获取root权限<br><code>adb unroot</code> ： 解除root权限</p>
<h2 id="四、设备连接管理"><a href="#四、设备连接管理" class="headerlink" title="四、设备连接管理"></a>四、设备连接管理</h2><p><strong>1、查询已连接设备/模拟器</strong><br><code>adb devices</code><br>输出格式为 [serialNumber] [state]。serialNumber即常说的SN，state 有如下几种：</p>
<ul>
<li>offline：表示设备未连接成功或无响应。</li>
<li>device：设备已连接。注意这个状态并不能标识 Android 系统已经完全启动和可操作，在设备启动过程中设备实例就可连接到 adb，但启动完毕后系统才处于可操作状态。</li>
<li>no device：没有设备/模拟器连接。</li>
</ul>
<p><strong>2、连接设备的几种方式</strong><br>(1)USB连接</p>
<blockquote>
<p>1)硬件状态正常：包括Android设备处于正常开机状态，USB连接线和各种接口完好。<br>2)设备的开发者选项和USB调试模式已开启：「设置」-「开发者选项」-「Android 调试」。<br>3)设备驱动状态正常：在Linux和Mac OS X下没问题，在Windows下可能需要安装驱动。<br>4)通过USB线连接好电脑和设备后检查状态：adb devices。</p>
</blockquote>
<p>(2)无线连接(需要借助USB线)</p>
<blockquote>
<p>1)将Android设备与电脑连接到同一个局域网：比如连到同一个 WiFi。<br>2)将设备与电脑通过USB线连接：确保连接成功，可运行adb devices查看。<br>3)让设备在5555端口监听TCP/IP连接：<code>adb tcpip 5555</code>。<br>4)断开USB连接。<br>5)查看设备的IP地址：「设置」-「关于手机」-「状态信息」-「IP地址」；也可以在第4)步前使用命令<code>adb shell ifconfig | grep Mask</code>查看。<br>6)通过IP地址连接设备：<code>adb connect &lt;device-ip-address&gt;</code><br>7)查看连接状态：adb devices。</p>
</blockquote>
<p>(3)无线连接(无需借助USB线)</p>
<blockquote>
<p>1)开启root权限：可以借助root应用。<br>2)在Android设备上安装一个终端模拟器：提供一个终端模拟器下载地址<a href="https://jackpal.github.io/Android-Terminal-Emulator/" target="_blank" rel="noopener">https://jackpal.github.io/Android-Terminal-Emulator/</a><br>3)将Android设备与电脑连接到同一个局域网：比如连到同一个WiFi。<br>4)打开Android设备上的终端模拟器，在里面依次运行命令：<code>su</code> <code>setprop service.adb.tcp.port 5555</code><br>5)查看设备的IP地址：「设置」-「关于手机」-「状态信息」-「IP地址」；也可以使用命令<code>adb shell ifconfig | grep Mask</code>查看。<br>6)通过IP地址连接设备：<code>adb connect &lt;device-ip-address&gt;</code><br>ps：有的设备，比如小米 5S + MIUI 8.0 + Android 6.0.1 MXB48T，可能在第6)步之前需要重启adbd服务，在设备的终端模拟器上运行：<code>restart adbd</code>，如果restart无效，可以尝试以下命令：<code>stop adbd</code> <code>start adbd</code></p>
</blockquote>
<h2 id="五、应用管理"><a href="#五、应用管理" class="headerlink" title="五、应用管理"></a>五、应用管理</h2><p><strong>1、查看应用列表</strong><br><code>adb shell pm list packages [-f] [-d] [-e] [-s] [-3] [-i] [-u] [--user USER_ID] [FILTER]</code></p>
<ul>
<li><code>无</code>：所有应用</li>
<li><code>-f</code>：显示应用关联的 apk 文件</li>
<li><code>-d</code>：只显示 disabled 的应用</li>
<li><code>-e</code>：只显示 enabled 的应用</li>
<li><code>-s</code>：只显示系统应用</li>
<li><code>-3</code>：只显示第三方应用</li>
<li><code>-i</code>：显示应用的 installer</li>
<li><code>-u</code>：包含已卸载应用</li>
<li><code>FILTER</code>：包名包含 FILTER字符串</li>
</ul>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">adb shell pm list packages #全部应用</span><br><span class="line">adb shell pm list packages -s #系统应用</span><br><span class="line">adb shell pm list packages -3 #第三方应用</span><br><span class="line">adb shell pm list packages test #包含字符串的应用</span><br><span class="line">adb shell pm list packages | grep test #grep过滤包含字符串的应用</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>2、安装APK</strong><br><code>adb install [-lrtsdg] &lt;path_to_apk&gt;</code></p>
<ul>
<li><code>-l</code>：将应用安装到保护目录 /mnt/asec</li>
<li><code>-r</code>：允许覆盖安装</li>
<li><code>-t</code>：允许安装AndroidManifest.xml里application指定android:testOnly=”true”的应用</li>
<li><code>-s</code>：将应用安装到 sdcard</li>
<li><code>-d</code>：允许降级覆盖安装</li>
<li><code>-g</code>：授予所有运行时权限</li>
</ul>
<p>ps：adb install实际上分三步完成(必要时可以手动分步执行安装过程)：</p>
<ul>
<li>push apk 文件到 /data/local/tmp。</li>
<li>调用 pm install 安装。</li>
<li>删除 /data/local/tmp 下的对应 apk 文件。</li>
</ul>
<p><strong>3、卸载APK</strong><br><code>adb uninstall [-k] &lt;packagename&gt;</code></p>
<ul>
<li>-k：卸载应用但保留数据和缓存目录。</li>
</ul>
<p>也可以直接删除：</p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">adb shell</span><br><span class="line">cd data/app</span><br><span class="line">rm &lt;packagename&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>4、清除应用数据与缓存</strong><br><code>adb shell pm clear &lt;packagename&gt;</code></p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell pm clear com.test.mobile</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>5、查看前台Activity</strong><br><code>adb shell dumpsys activity activities | grep mFocusedActivity</code></p>
<p><strong>6、查看正在运行的Services</strong><br><code>adb shell dumpsys activity services [&lt;packagename&gt;]</code><br>输出中包含很多信息，包括 Activity Resolver Table、Registered ContentProviders、包名、userId、安装后的文件资源代码等路径、版本信息、权限信息和授予状态、签名版本信息等。</p>
<p><strong>7、查看应用安装路径</strong><br><code>adb shell pm path &lt;PACKAGE&gt;</code></p>
<h2 id="六、应用交互"><a href="#六、应用交互" class="headerlink" title="六、应用交互"></a>六、应用交互</h2><p>应用交互主要是使用 <code>am &lt;command&gt;</code>:</p>
<ul>
<li><code>start [options] &lt;INTENT&gt;</code>：启动 <intent> 指定的 Activity</intent></li>
<li><code>startservice [options] &lt;INTENT&gt;</code>：启动 <intent> 指定的 Service</intent></li>
<li><code>broadcast [options] &lt;INTENT&gt;</code>：发送 <intent> 指定的广播</intent></li>
<li><code>force-stop &lt;packagename&gt;</code>：停止 <packagename> 相关的进程</packagename></li>
<li><code>stopservice &lt;INTENT&gt;</code>：停止Service</li>
<li><code>kill &lt;PACKAGE&gt;</code>：杀指定后台进程    </li>
<li><code>kill-all</code>：杀所有后台进程    </li>
<li><code>hang</code>：系统卡住    </li>
<li><code>restart</code>：重启    </li>
<li><code>bug-report</code>：创建bugreport    </li>
<li><code>dumpheap &lt;pid&gt; &lt;file&gt;</code>：进程pid的堆信息输出到file    </li>
<li><code>send-trim-memory &lt;pid&gt;&lt;level&gt;</code>：收紧进程的内存    </li>
<li><code>monitor</code>：监控    </li>
</ul>
<p><intent> 参数很灵活，和写Android程序时代码里的Intent相对应：</intent></p>
<ul>
<li><code>-a &lt;ACTION&gt;</code>：指定Intent action， 比如 android.intent.action.VIEW</li>
<li><code>-n &lt;COMPONENT&gt;</code>：指定完整组件名，用于明确指定启动哪个Activity，如 com.example.app/.ExampleActivity</li>
<li><code>-d &lt;DATA_URI&gt;</code>：指定Intent data URI</li>
<li><code>-t &lt;MIME_TYPE&gt;</code>：指定Intent MIME Type</li>
<li><code>-c &lt;CATEGORY&gt;</code>：指定Intent category，比如 android.intent.category.APP_CONTACTS</li>
<li><code>-p &lt;PACKAGE&gt;</code>：指定包名，实现原理Intent.setPackage()</li>
<li><code>-f &lt;FLAGS&gt;</code>：添加flags，实现原理Intent.setFlags(int )，紧接着的参数必须是int型</li>
</ul>
<p><intent> 里还能带数据，就像写代码时的 Bundle 一样：</intent></p>
<ul>
<li><code>--esn &lt;EXTRA_KEY&gt;</code>：null 值（只有 key 名）</li>
<li><code>-e | --es &lt;EXTRA_KEY&gt; &lt;EXTRA_STRING_VALUE&gt;</code></li>
<li><code>--ez &lt;EXTRA_KEY&gt; &lt;EXTRA_BOOLEAN_VALUE&gt;</code>：boolean 值</li>
<li><code>--ei &lt;EXTRA_KEY&gt; &lt;EXTRA_INT_VALUE&gt;</code>：integer 值</li>
<li><code>--el &lt;EXTRA_KEY&gt; &lt;EXTRA_LONG_VALUE&gt;</code>：long 值</li>
<li><code>--ef &lt;EXTRA_KEY&gt; &lt;EXTRA_FLOAT_VALUE&gt;</code>：float 值</li>
<li><code>--eu &lt;EXTRA_KEY&gt; &lt;EXTRA_URI_VALUE&gt;</code>：URI</li>
<li><code>--ecn &lt;EXTRA_KEY&gt; &lt;EXTRA_COMPONENT_NAME_VALUE&gt;</code>：component name</li>
<li><code>--eia &lt;EXTRA_KEY&gt; &lt;EXTRA_INT_VALUE&gt;[,&lt;EXTRA_INT_VALUE...]</code>：integer 数组</li>
<li><code>--ela &lt;EXTRA_KEY&gt; &lt;EXTRA_LONG_VALUE&gt;[,&lt;EXTRA_LONG_VALUE...]</code>：long 数组</li>
</ul>
<p><strong>1、启动Activity</strong><br><code>adb shell am start [options] &lt;INTENT&gt;</code></p>
<ul>
<li><code>-D</code>: 允许调试功能</li>
<li><code>-W</code>: 等待app启动完成，获得启动时间</li>
<li><code>-R &lt;COUNT&gt;</code>: 重复启动Activity COUNT次</li>
<li><code>-S</code>: 启动activity之前，先调用forceStopPackage()方法强制停止app</li>
<li><code>–opengl-trace</code>: 运行获取OpenGL函数的trace</li>
<li><code>–user &lt;USER_ID&gt; | current</code>: 指定用户来运行App,默认为当前用户</li>
<li><code>–start-profiler &lt;FILE&gt;</code>: 启动profiler，并将结果发送到 <file></file></li>
<li><code>-P &lt;FILE&gt;</code>: 类似 –start-profiler，不同的是当app进入idle状态，则停止profiling</li>
<li><code>–sampling INTERVAL</code>: 设置profiler 取样时间间隔，单位ms</li>
</ul>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb shell am start -n com.tencent.mm/.ui.LauncherUI</span><br><span class="line">adb shell am start -n -W com.tencent.mm/.ui.LauncherUI</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>2、启动Service</strong><br><code>adb shell am startservice [options] &lt;INTENT&gt;</code></p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am startservice -n com.tencent.mm/.plugin.accountsync.model.AccountAuthenticatorService</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>3、停止Service</strong><br><code>adb shell am stopservice [options] &lt;INTENT&gt;</code></p>
<p><strong>4、发送广播</strong><br><code>adb shell am broadcast [options] &lt;INTENT&gt;</code></p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am broadcast -a android.intent.action.BOOT_COMPLETED</span><br></pre></td></tr></table></figure>
</blockquote>
<p>既能发送系统预定义的广播，也能发送自定义广播。如下是部分系统预定义广播及正常触发时机：</p>
<ul>
<li><code>android.net.conn.CONNECTIVITY_CHANGE</code>：网络连接发生变化</li>
<li><code>android.intent.action.SCREEN_ON</code>：屏幕点亮</li>
<li><code>android.intent.action.SCREEN_OFF</code>：屏幕熄灭</li>
<li><code>android.intent.action.BATTERY_LOW</code>：电量低，会弹出电量低提示框</li>
<li><code>android.intent.action.BATTERY_OKAY</code>：电量恢复了</li>
<li><code>android.intent.action.BOOT_COMPLETED</code>：设备启动完毕</li>
<li><code>android.intent.action.DEVICE_STORAGE_LOW</code>：存储空间过低</li>
<li><code>android.intent.action.DEVICE_STORAGE_OK</code>：存储空间恢复</li>
<li><code>android.intent.action.PACKAGE_ADDED</code>：安装了新的应用</li>
<li><code>android.net.wifi.STATE_CHANGE</code>：WiFi连接状态发生变化</li>
<li><code>android.net.wifi.WIFI_STATE_CHANGED</code>：WiFi 状态变为启用/关闭/正在启动/正在关闭/未知</li>
<li><code>android.intent.action.BATTERY_CHANGED</code>：电池电量发生变化</li>
<li><code>android.intent.action.INPUT_METHOD_CHANGED</code>：系统输入法发生变化</li>
<li><code>android.intent.action.ACTION_POWER_CONNECTED</code>：外部电源连接</li>
<li><code>android.intent.action.ACTION_POWER_DISCONNECTED</code>：外部电源断开连接</li>
<li><code>android.intent.action.DREAMING_STARTED</code>：系统开始休眠</li>
<li><code>android.intent.action.DREAMING_STOPPED</code>：系统停止休眠</li>
<li><code>android.intent.action.WALLPAPER_CHANGED</code>：壁纸发生变化</li>
<li><code>android.intent.action.HEADSET_PLUG</code>：插入耳机</li>
<li><code>android.intent.action.MEDIA_UNMOUNTED</code>：卸载外部介质</li>
<li><code>android.intent.action.MEDIA_MOUNTED</code>：挂载外部介质</li>
<li><code>android.os.action.POWER_SAVE_MODE_CHANGED</code>：省电模式开启</li>
</ul>
<p><strong>5、强制停止应用</strong><br><code>adb shell am force-stop &lt;packagename&gt;</code></p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am force-stop com.test.mobile</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>6、收紧内存</strong><br><code>adb shell am send-trim-memory  &lt;pid&gt; &lt;level&gt;</code></p>
<ul>
<li>pid: 进程 ID </li>
<li>level: HIDDEN、RUNNING_MODERATE、BACKGROUND、 RUNNING_LOW、MODERATE、RUNNING_CRITICAL、COMPLETE</li>
</ul>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am send-trim-memory 12345 RUNNING_LOW</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="七、文件管理"><a href="#七、文件管理" class="headerlink" title="七、文件管理"></a>七、文件管理</h2><p><strong>1、复制设备里的文件到电脑</strong><br><code>adb pull &lt;设备里的文件路径&gt; [电脑上的目录]</code></p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb pull /sdcard/sr.mp4 ~/tmp/</span><br><span class="line">#ps：设备上的文件路径可能需要root权限才能访问，如果你的设备已经root过，可以先使用 adb shell 和 su 命令在 adb shell 里获取 root 权限后，先 cp /path/on/device /sdcard/filename 将文件复制到 sdcard，然后 adb pull /sdcard/filename /path/on/pc</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>2、复制电脑里的文件到设备</strong><br><code>adb push &lt;电脑上的文件路径&gt; &lt;设备里的目录&gt;</code></p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb push ~/sr.mp4 /sdcard/</span><br><span class="line">#ps：设备上的文件路径普通权限可能无法直接写入，如果你的设备已经 root 过，可以先 adb push /path/on/pc /sdcard/filename，然后 adb shell 和 su 在 adb shell 里获取 root 权限后，cp /sdcard/filename /path/on/device</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="八、查看日志"><a href="#八、查看日志" class="headerlink" title="八、查看日志"></a>八、查看日志</h2><p><strong>1、查看日志</strong><br><code>[adb] logcat [&lt;option&gt;] ... [&lt;filter-spec&gt;] ...</code><br>(1)选项解析: </p>
<ul>
<li><code>-s</code>: 设置输出日志的标签, 只显示该标签的日志;</li>
<li><code>-f</code>: 将日志输出到文件, 默认输出到标准输出流中, -f 参数执行不成功;</li>
<li><code>-r</code>: 按照每千字节输出日志, 需要 -f 参数, 不过这个命令没有执行成功;</li>
<li><code>-n</code>: 设置日志输出的最大数目, 需要 -r 参数, 这个执行 感觉 跟 adb logcat 效果一样;</li>
<li><code>-v</code>: 设置日志的输出格式, 注意只能设置一项;</li>
<li><code>-c</code>: 清空所有的日志缓存信息;</li>
<li><code>-d</code>: 将缓存的日志输出到屏幕上, 并且不会阻塞;</li>
<li><code>-t</code>: 输出最近的几行日志, 输出完退出, 不阻塞;</li>
<li><code>-g</code>: 查看日志缓冲区信息;</li>
<li><code>-b</code>: 加载一个日志缓冲区, 默认是 main, 下面详解;</li>
<li><code>-B</code>: 以二进制形式输出日志;</li>
</ul>
<p>(2)过滤项解析，格式 : <tag>[:priority] , 标签:日志等级, 默认的日志过滤项是 ” *:I ” 。</tag></p>
<ul>
<li><code>V</code>: Verbose (明细);</li>
<li><code>D</code>: Debug (调试);</li>
<li><code>I</code>: Info (信息);</li>
<li><code>W</code>: Warn (警告);</li>
<li><code>E</code>: Error (错误);</li>
<li><code>F</code>: Fatal (严重错误);</li>
<li><code>S</code>: Silent(Super all output) (最高的优先级, 可能不会记载东西);</li>
</ul>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">adb logcat -d -f /sdcard/log.txt  #日志写入sdcard</span><br><span class="line">adb logcat ActivityManager:I MyApp:D *:S # 按tag和级别过滤日志</span><br><span class="line">adb logcat -c #清空日志</span><br><span class="line">adb logcat -v time &gt; C:\Users\test\Desktop\log.txt  #日志写入电脑</span><br><span class="line"></span><br><span class="line"># 设置日志的输出格式:</span><br><span class="line">#brief格式(是默认的日志格式): 【优先级 / 标签 (进程ID) : 日志信息】</span><br><span class="line">adb logcat -v brief </span><br><span class="line"></span><br><span class="line">#process格式 : 【优先级 (进程ID) : 日志信息】</span><br><span class="line">adb logcat -v process</span><br><span class="line"></span><br><span class="line">#tag格式 : 【优先级 / 标签 : 日志信息】</span><br><span class="line">adb logcat -v tag</span><br><span class="line"></span><br><span class="line">#thread格式 : 【优先级 ( 进程ID : 线程ID) 标签 : 日志内容】</span><br><span class="line">adb logcat -v thread  </span><br><span class="line"></span><br><span class="line"># raw格式 : 只输出日志信息, 不附加任何其他信息</span><br><span class="line">adb logcat -v raw  </span><br><span class="line"></span><br><span class="line">#time格式 : 【日期 时间 优先级 / 标签 (进程ID) : 进程名称 : 日志信息】</span><br><span class="line">adb logcat -v time  </span><br><span class="line"></span><br><span class="line">#long格式: 【[日期 时间 进程ID : 线程ID 优先级 / 标签] 日志信息】</span><br><span class="line">adb logcat -v long</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>2、内核日志</strong><br><code>adb shell dmesg</code></p>
<h2 id="九、查看设备信息"><a href="#九、查看设备信息" class="headerlink" title="九、查看设备信息"></a>九、查看设备信息</h2><p><strong>1、查看屏幕分辨率</strong><br><code>adb shell wm size</code></p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">adb shell wm size</span><br><span class="line"></span><br><span class="line">#输出信息</span><br><span class="line">Physical size: 1080x1920 #屏幕分辨率原本是 1080px * 1920px</span><br><span class="line">Override size: 480x1024 #当前被修改为 480px * 1024px，如果未修改过则不显示</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>2、查看屏幕密度</strong><br><code>adb shell wm density</code></p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">adb shell wm density</span><br><span class="line"></span><br><span class="line">#输出信息</span><br><span class="line">Physical density: 480 #屏幕密度原来是 480dpi</span><br><span class="line">Override density: 160 #当前被修改为 160dpi，如果未修改过则不显示</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>3、查看显示屏参数</strong><br><code>adb shell dumpsys window displays</code></p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys window displays</span><br><span class="line"></span><br><span class="line">#输出信息</span><br><span class="line">WINDOW MANAGER DISPLAY CONTENTS (dumpsys window displays)</span><br><span class="line">  Display: mDisplayId=0</span><br><span class="line">    init=1080x1920 420dpi cur=1080x1920 app=1080x1794 rng=1080x1017-1810x1731</span><br><span class="line">    deferred=false layoutNeeded=false</span><br><span class="line">#mDisplayId 为 显示屏编号，init 是初始分辨率和屏幕密度，app 的高度比 init 里的要小，表示屏幕底部有虚拟按键，高度为 1920 - 1794 = 126px 合 42dp</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>4、查看电池状况</strong><br><code>adb shell dumpsys battery</code><br><code>adb shell dumpsys batterystats</code></p>
<p><strong>5、查看CPU信息</strong><br><code>adb shell cat /proc/cpuinfo</code><br><code>adb shell dumpsys cpuinfo | grep {PackageName}</code><br><code>adb shell top | grep {PackageName}</code></p>
<p><strong>6、查看内存信息</strong><br><code>adb shell cat /proc/meminfo</code><br><code>adb shell dumpsys meminfo {PackageName}</code><br><code>adb shell top -d 刷新时间| grep {PackageName}</code></p>
<p><strong>7、查看流量信息</strong><br><code>adb shell cat /proc/pid/net/dev</code></p>
<p><strong>8、查看FPS</strong><br><code>adb shell dumpsys gfxinfo</code></p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys gfxinfo com.peng.cloudp.tv &gt; test.txt #抓取数据后用表格进行分析</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>9、查看型号</strong><br><code>adb shell getprop ro.product.model</code></p>
<p><strong>10、查看android_id</strong><br><code>adb shell settings get secure android_id</code></p>
<p><strong>11、查看IMEI</strong><br>(1)Android 4.4及以下版本可通过如下命令获取IMEI：<br><code>adb shell dumpsys iphonesubinfo</code><br>(2)Android 5.0及以上版本通过其它方式获取了(需要 root 权限)：</p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">adb shell</span><br><span class="line">su</span><br><span class="line">service call iphonesubinfo 1</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>12、查看安卓系统版本</strong><br><code>adb shell getprop ro.build.version.release</code></p>
<p><strong>13、查看IP地址</strong><br><code>adb shell ifconfig | grep Mask</code><br>有的设备上这个命令没有输出，如果设备连着 WiFi，可以使用如下命令来查看局域网 IP：<br><code>adb shell ifconfig wlan0</code><br>如果以上命令仍然不能得到期望的信息，可以试试以下命令:<br><code>adb shell netcfg</code></p>
<p><strong>14、查看Mac地址</strong><br><code>adb shell cat /sys/class/net/wlan0/address</code><br>这查看的是局域网 Mac 地址，移动网络或其它连接的信息可以通过<br><code>adb shell netcfg</code></p>
<p><strong>15、更多硬件与系统属性</strong><br><code>adb shell cat /system/build.prop</code></p>
<ul>
<li>ro.build.version.sdk：SDK 版本</li>
<li>ro.build.version.release：Android 系统版本</li>
<li>ro.build.version.security_patch：Android 安全补丁程序级别</li>
<li>ro.product.model：型号</li>
<li>ro.product.brand：品牌</li>
<li>ro.product.name：设备名</li>
<li>ro.product.board：处理器型号</li>
<li>ro.product.cpu.abilist：CPU 支持的 abi 列表[节注一]</li>
<li>persist.sys.isUsbOtgEnabled：是否支持 OTG</li>
<li>dalvik.vm.heapsize：每个应用程序的内存上限</li>
<li>ro.sf.lcd_density：屏幕密度</li>
</ul>
<p>输出里还包括一些其它有用的信息，它们也可通过 <code>adb shell getprop &lt;属性名&gt;</code> 命令单独查看。</p>
<p><strong>16、查看连接过的WiFi密码</strong><br><code>adb shell</code><br><code>su</code><br><code>cat /data/misc/wifi/*.conf</code><br>ps:需要root权限</p>
<p><strong>17、获取连接到的设备的序列号</strong><br><code>adb get-serialno</code></p>
<p><strong>18、获取设备的连接状态</strong><br><code>adb -s {serialno} get-stat</code></p>
<p><strong>19、等待设备连接成功</strong><br><code>adb wait-for-device</code></p>
<h2 id="十、修改设置"><a href="#十、修改设置" class="headerlink" title="十、修改设置"></a>十、修改设置</h2><p><strong>1、修改分辨率</strong><br><code>adb shell wm size 480x1024</code><br>恢复原分辨率命令：<br><code>adb shell wm size reset</code></p>
<p><strong>2、修改屏幕密度</strong><br><code>adb shell wm density 160</code><br>恢复原屏幕密度命令：<br><code>adb shell wm density reset</code></p>
<p><strong>3、修改显示区域</strong><br><code>adb shell wm overscan 0,0,0,200</code><br>四个数字分别表示距离左、上、右、下边缘的留白像素，以上命令表示将屏幕底部 200px 留白。<br>恢复原显示区域命令：<br><code>adb shell wm overscan reset</code></p>
<p><strong>4、关闭USB调试模式</strong><br><code>adb shell settings put global adb_enabled 0</code><br>ps：用命令恢复不了了，关闭了USB调试，adb就连接不 Android设备了。</p>
<p><strong>5、状态栏和导航栏的显示隐藏</strong><br><code>adb shell settings put global policy_control &lt;key-values&gt;</code><br>key:</p>
<ul>
<li><code>immersive.full</code>：同时隐藏</li>
<li><code>immersive.status</code>：隐藏状态栏</li>
<li><code>immersive.navigation</code>：隐藏导航栏</li>
<li><code>immersive.preconfirms</code>：?</li>
</ul>
<p>value:</p>
<ul>
<li><code>apps</code>：所有应用</li>
<li><code>*</code>：所有界面</li>
<li><code>packagename</code>：指定应用</li>
<li><code>-packagename</code>：排除指定应用</li>
</ul>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb shell settings put global policy_control immersive.full=*</span><br><span class="line">adb shell settings put global policy_control immersive.status=com.package1,com.package2:immersive.navigation=apps,-com.package3</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>6、设置系统日期和时间</strong><br>ps:需要root权限<br><code>adb shell</code><br><code>su</code><br>(1)先设置系统的时区配置</p>
<ul>
<li><code>cat /data/property/persist.sys.timezone</code>：查看当前时区配置文件</li>
<li><code>setprop persist.sys.timezone GMT</code>：修改属性 </li>
</ul>
<p>(2)设置修改当前系统时间</p>
<ul>
<li><code>date -s &quot;yyyymmdd.[[[hh]mm]ss]&quot;</code></li>
<li><code>System/bin/date -s &quot;yyyymmdd.[[[hh]mm]ss]&quot;</code></li>
</ul>
<p>(3)查看是否生效<br><code>date</code></p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">date -s &quot;20151116.120000&quot;  </span><br><span class="line">date</span><br><span class="line"></span><br><span class="line">#输出：Mon Nov 16 12:00:02 CST 2015</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="十一、设备控制"><a href="#十一、设备控制" class="headerlink" title="十一、设备控制"></a>十一、设备控制</h2><p><strong>1、屏幕截图</strong><br><code>adb exec-out screencap -p &gt; sc.png</code></p>
<ul>
<li><code>-p</code>：指定保存文件为 png 格式</li>
<li><code>-d display-id</code>：指定截图的显示屏编号（有多显示屏的情况下）</li>
</ul>
<p>以上命令需要新版本adb，老版本请使用下边命令：<br><code>adb shell screencap -p /sdcard/sc.png</code><br><code>adb pull /sdcard/sc.png</code></p>
<p><strong>2、录制屏幕</strong><br><code>adb shell screenrecord /sdcard/test.mp4</code></p>
<ul>
<li><code>--size WIDTHxHEIGHT</code>：视频的尺寸，比如 1280x720，默认是屏幕分辨率。</li>
<li><code>--bit-rate RATE</code>：视频的比特率，默认是 4Mbps。</li>
<li><code>--time-limit TIME</code>：录制时长，单位秒。</li>
<li><code>--verbose</code>：输出更多信息</li>
</ul>
<p>需要停止时按 Ctrl-C，默认录制时间和最长录制时间都是 180 秒。如果需要导出到电脑：<br><code>adb pull /sdcard/test.mp4</code></p>
<p><strong>3、重启设备</strong><br><code>adb reboot</code></p>
<p><strong>4、设备关机</strong><br><code>adb shutdown</code></p>
<p><strong>5、开启/关闭wifi</strong></p>
<ul>
<li><code>adb shell svc wifi enable</code>：开启wifi</li>
<li><code>adb shell svc wifi disable</code>：关闭wifi<br>ps：需要root权限</li>
</ul>
<p><strong>6、模拟按键/输入</strong><br><code>adb shell input [&lt;source&gt;] &lt;command&gt; [&lt;arg&gt;...]</code><br>The sources are:</p>
<ul>
<li>mouse</li>
<li>keyboard</li>
<li>joystick</li>
<li>touchnavigation</li>
<li>touchpad</li>
<li>trackball</li>
<li>stylus</li>
<li>dpad</li>
<li>gesture</li>
<li>touchscreen</li>
<li>gamepad</li>
</ul>
<p>The commands and default sources are:</p>
<ul>
<li>text <string> (Default: touchscreen)</string></li>
<li>keyevent [–longpress] <key code="" number="" or="" name=""> … (Default: keyboard)</key></li>
<li>tap <x> <y> (Default: touchscreen)</y></x></li>
<li>swipe <x1> <y1> <x2> <y2> [duration(ms)] (Default: touchscreen)</y2></x2></y1></x1></li>
<li>press (Default: trackball)</li>
<li>roll <dx> <dy> (Default: trackball)</dy></dx></li>
</ul>
<p>ps：<a href="https://pythonfood.github.io/2018/02/01/appium%E9%94%AE%E5%80%BC%E8%A1%A8/">常用keycode键值表</a></p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">#输入文本</span><br><span class="line">adb shell input text hello</span><br><span class="line"></span><br><span class="line">#滑动屏幕</span><br><span class="line">adb shell input swipe 300 1000 300 500</span><br><span class="line"></span><br><span class="line">#点击屏幕</span><br><span class="line">adb shell input touchscreen tap 300 1000</span><br><span class="line"></span><br><span class="line">#熄灭屏幕</span><br><span class="line">adb shell input keyevent 223</span><br><span class="line"></span><br><span class="line">#点亮屏幕</span><br><span class="line">adb shell input keyevent 224</span><br><span class="line"></span><br><span class="line">#电源键</span><br><span class="line">adb shell input keyevent 26</span><br><span class="line"></span><br><span class="line">#菜单键</span><br><span class="line">adb shell input keyevent 82</span><br><span class="line"></span><br><span class="line">#HOME键</span><br><span class="line">adb shell input keyevent 3</span><br><span class="line"></span><br><span class="line">#返回键</span><br><span class="line">adb shell input keyevent 4</span><br><span class="line"></span><br><span class="line">#增加音量</span><br><span class="line">adb shell input keyevent 24</span><br><span class="line"></span><br><span class="line">#降低音量</span><br><span class="line">adb shell input keyevent 25</span><br><span class="line"></span><br><span class="line">#静音</span><br><span class="line">adb shell input keyevent 164</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="十二、挂载分区"><a href="#十二、挂载分区" class="headerlink" title="十二、挂载分区"></a>十二、挂载分区</h2><p><strong>1、简写命令</strong><br><code>adb remount</code><br><code>adb shell mount -o remount /system</code></p>
<p><strong>2、mount命令详解</strong><br><code>mount [-r] [-w] [-o options] [-t type] device directory</code></p>
<ul>
<li><code>-t vfstype</code>：指定文件系统的类型，通常不必指定。mount 会自动选择正确的类型。常用类型有：<ul>
<li>光盘或光盘镜像：iso9660</li>
<li>DOS fat16文件系统：msdos</li>
<li>Windows 9x fat32文件系统：vfat</li>
<li>Windows NT ntfs文件系统：ntfs</li>
<li>Mount Windows文件网络共享：smbfs</li>
<li>UNIX(LINUX) 文件网络共享：nfs</li>
</ul>
</li>
<li><code>-o options</code>：主要用来描述设备或档案的挂接方式。常用的参数有：<ul>
<li>loop：用来把一个文件当成硬盘分区挂接上系统</li>
<li>ro：采用只读方式挂接设备</li>
<li>rw：采用读写方式挂接设备</li>
<li>iocharset：指定访问文件系统所用字符集</li>
</ul>
</li>
<li>device：要挂接(mount)的设备。</li>
<li>dir：设备在系统上的挂接点(mount point)。</li>
</ul>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 需要root权限</span><br><span class="line">adb shell</span><br><span class="line">su</span><br><span class="line"></span><br><span class="line"># 查看当前分区挂载情况</span><br><span class="line">mount </span><br><span class="line"></span><br><span class="line"># 找到/system的那一行</span><br><span class="line">#/dev/block/platform/msm_sdcc.1/by-name/system /system ext4 ro,seclabel,relatime,data=ordered 0 0</span><br><span class="line"></span><br><span class="line"># 重新挂载</span><br><span class="line">mount -o remount,rw /dev/block/mtdblock0 /system</span><br><span class="line"></span><br><span class="line">#如果需要改回去ro</span><br><span class="line">mount -o remount,ro /dev/block/mtdblock0 /system</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="十三、刷机相关"><a href="#十三、刷机相关" class="headerlink" title="十三、刷机相关"></a>十三、刷机相关</h2><p><strong>1、从Recovery重启到Android</strong><br><code>adb reboot</code></p>
<p><strong>2、重启到Recovery模式(卡刷)</strong><br><code>adb recovery</code></p>
<p><strong>3、重启到Fastboot模式(线刷)</strong><br><code>adb reboot bootloader</code></p>
<p><strong>4、通过sideload更新系统(属于卡刷)</strong><br>(1)重启到 Recovery 模式。<br><code>adb reboot recovery</code><br>(2)在设备的Recovery界面上操作进入Apply update-Apply from ADB。<br>ps：不同的 Recovery 菜单可能与此有差异，有的是一级菜单就有 Apply update from ADB。<br>(3)通过 adb 上传和更新系统。<br><code>adb sideload &lt;path-to-update.zip&gt;</code></p>
<h1 id="持续更新…"><a href="#持续更新…" class="headerlink" title="持续更新…"></a><em>持续更新…</em></h1>
            <div class="post-copyright">
    <div class="content">
        <p>最后更新： 2018年05月08日 15:53</p>
        <p>原始链接： <a class="post-url" href="/2017/12/27/adb/" title="adb">http://pythonfood.github.io/2017/12/27/adb/</a></p>
        <footer>
            <a href="http://pythonfood.github.io">
                <img src="/images/logo.png" alt="Python Food">
                Python Food
            </a>
        </footer>
    </div>
</div>

      
        
            
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;">赏</a>
</div>

<div id="reward" class="post-modal reward-lay">
    <a class="close" href="javascript:;" id="reward-close">×</a>
    <span class="reward-title">
        <i class="icon icon-quote-left"></i>
        多少都行~
        <i class="icon icon-quote-right"></i>
    </span>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/images/wechat_code.jpg" alt="打赏二维码">
        </div>
        <div class="reward-select">
            
            <label class="reward-select-item checked" data-id="wechat" data-wechat="/images/wechat_code.jpg">
                <img class="reward-select-item-wechat" src="/images/wechat.png" alt="微信">
            </label>
            
            
            <label class="reward-select-item" data-id="alipay" data-alipay="/images/alipay_code.jpg">
                <img class="reward-select-item-alipay" src="/images/alipay.png" alt="支付宝">
            </label>
            
        </div>
    </div>
</div>


        
    </div>
    <footer class="article-footer">
        
        
<div class="post-share">
    <a href="javascript:;" id="share-sub" class="post-share-fab">
        <i class="fa fa-share-alt"></i>
    </a>
    <div class="post-share-list" id="share-list">
        <ul class="share-icons">
          <li>
            <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://pythonfood.github.io/2017/12/27/adb/&title=《adb》 — PythonFood&pic=/images/banner.jpg" data-title="微博">
              <i class="fa fa-weibo"></i>
            </a>
          </li>
          <li>
            <a class="weixin share-sns" id="wxFab" href="javascript:;" data-title="微信">
              <i class="fa fa-weixin"></i>
            </a>
          </li>
          <li>
            <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://pythonfood.github.io/2017/12/27/adb/&title=《adb》 — PythonFood&source=adb常用命令笔记。" data-title="QQ">
              <i class="fa fa-qq"></i>
            </a>
          </li>
          <li>
            <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://pythonfood.github.io/2017/12/27/adb/" data-title="Facebook">
              <i class="fa fa-facebook"></i>
            </a>
          </li>
          <li>
            <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《adb》 — PythonFood&url=http://pythonfood.github.io/2017/12/27/adb/&via=http://pythonfood.github.io" data-title="Twitter">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
          <li>
            <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://pythonfood.github.io/2017/12/27/adb/" data-title="Google+">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        </ul>
     </div>
</div>
<div class="post-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;" id="wxShare-close">×</a>
    <p>扫一扫，分享到微信</p>
    <img src="//api.qrserver.com/v1/create-qr-code/?data=http://pythonfood.github.io/2017/12/27/adb/" alt="微信分享二维码">
</div>

<div class="mask"></div>

        
        <ul class="article-footer-menu">
            
            
  <li class="article-footer-tags">
    <i class="fa fa-tags"></i>
      
    <a href="/tags/adb/" class="color4">adb</a>
      
  </li>

        </ul>
        
    </footer>
  </div>
</article>


    <aside class="post-toc-pos post-toc-top" id="post-toc">
        <nav class="post-toc-wrap">
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#一、adb简介"><span class="post-toc-text">一、adb简介</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#二、adb安装"><span class="post-toc-text">二、adb安装</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#三、adb基本用法"><span class="post-toc-text">三、adb基本用法</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#四、设备连接管理"><span class="post-toc-text">四、设备连接管理</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#五、应用管理"><span class="post-toc-text">五、应用管理</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#六、应用交互"><span class="post-toc-text">六、应用交互</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#七、文件管理"><span class="post-toc-text">七、文件管理</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#八、查看日志"><span class="post-toc-text">八、查看日志</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#九、查看设备信息"><span class="post-toc-text">九、查看设备信息</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#十、修改设置"><span class="post-toc-text">十、修改设置</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#十一、设备控制"><span class="post-toc-text">十一、设备控制</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#十二、挂载分区"><span class="post-toc-text">十二、挂载分区</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#十三、刷机相关"><span class="post-toc-text">十三、刷机相关</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#持续更新…"><span class="post-toc-text">持续更新…</span></a>
        </nav>
    </aside>
    

<nav id="article-nav">
  
    <a href="/2017/12/27/安卓专项测试/" id="article-nav-newer" class="article-nav-link-wrap">

      <span class="article-nav-title">
        <i class="fa fa-hand-o-left" aria-hidden="true"></i>
        
          安卓专项测试
        
      </span>
    </a>
  
  
    <a href="/2017/12/27/linux/" id="article-nav-older" class="article-nav-link-wrap">
      <span class="article-nav-title">linux</span>
      <i class="fa fa-hand-o-right" aria-hidden="true"></i>
    </a>
  
</nav>



    
        <div id="SOHUCS" sid="adb" ></div>
<script type="text/javascript">
    (function(){
        var appid = 'cytnRgqDg';
        var conf = '61714297a608dcad6779ec4ea0059b2a';
        var width = window.innerWidth || document.documentElement.clientWidth;
        if (width < 960) {
            window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>
    
</section>
        
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info" class="inner">
      
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


      <p>
        Powered by  <a href="http://hexo.io/" target="_blank">Hexo</a>
        Theme <a href="//github.com/wongminho/hexo-theme-miho" target="_blank">MiHo</a>
      &copy; 2018 Python Food<br>
      </p>
    </div>
  </div>
</footer>
    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script>
  var mihoConfig = {
      root: "http://pythonfood.github.io",
      animate: true,
      isHome: false,
      share: true,
      reward: 1
  }
</script>
<div class="sidebar">
    <div id="sidebar-search" title="Search">
        <i class="fa fa-search"></i>
    </div>
    <div id="sidebar-category" title="Categories">
        <i class="fa fa-book"></i>
    </div>
    <div id="sidebar-tag" title="Tags">
        <i class="fa fa-tags"></i>
    </div>
    <div id="sidebar-top">
        <span class="sidebar-top-icon"><i class="fa fa-angle-up"></i></span>
    </div>
</div>
<div class="sidebar-menu-box" id="sidebar-menu-box">
    <div class="sidebar-menu-box-container">
        <div id="sidebar-menu-box-categories">
            <a class="category-link" href="/categories/appium/">appium</a><a class="category-link" href="/categories/app测试/">app测试</a><a class="category-link" href="/categories/hexo/">hexo</a><a class="category-link" href="/categories/linux/">linux</a><a class="category-link" href="/categories/markdown/">markdown</a><a class="category-link" href="/categories/monkey/">monkey</a><a class="category-link" href="/categories/mysql/">mysql</a><a class="category-link" href="/categories/python/">python</a><a class="category-link" href="/categories/selenium/">selenium</a><a class="category-link" href="/categories/web测试/">web测试</a><a class="category-link" href="/categories/专项测试/">专项测试</a><a class="category-link" href="/categories/持续集成/">持续集成</a><a class="category-link" href="/categories/接口测试/">接口测试</a><a class="category-link" href="/categories/测试框架/">测试框架</a><a class="category-link" href="/categories/测试用例/">测试用例</a>
        </div>
        <div id="sidebar-menu-box-tags">
            <a href="/tags/adb/" style="font-size: 10px;">adb</a> <a href="/tags/appium/" style="font-size: 13.33px;">appium</a> <a href="/tags/app测试/" style="font-size: 10px;">app测试</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/monkey/" style="font-size: 10px;">monkey</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/selenium/" style="font-size: 11.67px;">selenium</a> <a href="/tags/web测试/" style="font-size: 10px;">web测试</a> <a href="/tags/专项测试/" style="font-size: 16.67px;">专项测试</a> <a href="/tags/持续集成/" style="font-size: 10px;">持续集成</a> <a href="/tags/接口测试/" style="font-size: 15px;">接口测试</a> <a href="/tags/测试框架/" style="font-size: 10px;">测试框架</a> <a href="/tags/测试用例/" style="font-size: 18.33px;">测试用例</a>
        </div>
    </div>
    <a href="javascript:;" class="sidebar-menu-box-close">&times;</a>
</div>
<div class="mobile-header-menu-nav" id="mobile-header-menu-nav">
    <div class="mobile-header-menu-container">
        <span class="title">Menus</span>
        <ul class="mobile-header-menu-navbar">
            
            <li>
                <a  href="/">
                    <i class="fa fa-home"></i><span>Home</span>
                </a>
            </li>
            
            <li>
                <a  href="/archives">
                    <i class="fa fa-archive"></i><span>Archives</span>
                </a>
            </li>
            
            <li>
                <a  href="/about">
                    <i class="fa fa-user"></i><span>About</span>
                </a>
            </li>
            
        </ul>
    </div>
    <div class="mobile-header-tag-container">
        <span class="title">Tags</span>
        <div id="mobile-header-container-tags">
            <a href="/tags/adb/" style="font-size: 10px;">adb</a> <a href="/tags/appium/" style="font-size: 13.33px;">appium</a> <a href="/tags/app测试/" style="font-size: 10px;">app测试</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/monkey/" style="font-size: 10px;">monkey</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/selenium/" style="font-size: 11.67px;">selenium</a> <a href="/tags/web测试/" style="font-size: 10px;">web测试</a> <a href="/tags/专项测试/" style="font-size: 16.67px;">专项测试</a> <a href="/tags/持续集成/" style="font-size: 10px;">持续集成</a> <a href="/tags/接口测试/" style="font-size: 15px;">接口测试</a> <a href="/tags/测试框架/" style="font-size: 10px;">测试框架</a> <a href="/tags/测试用例/" style="font-size: 18.33px;">测试用例</a>
        </div>
    </div>
</div>
<div class="search-wrap">
    <span class="search-close">&times;</span>
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
            <i class="icon icon-lg icon-chevron-left"></i>
        </a>
        <input class="search-field" placeholder="Search..." id="keywords">
        <a id="search-submit" href="javascript:;">
            <i class="fa fa-search"></i>
        </a>
    <div class="search-container" id="search-container">
        <ul class="search-result" id="search-result">
        </ul>
    </div>
</div>

<div id="search-tpl">
    <li class="search-result-item">
        <a href="{url}" class="search-item-li">
            <span class="search-item-li-title" title="{title}">{title}</span>
        </a>
    </li>
</div>
<script src="/js/search.js"></script>
<script src="/js/main.js"></script>


  <script src="//cdn.bootcss.com/particles.js/2.0.0/particles.min.js"></script>
  <div id="particles"></div>
  <script src="/js/particles.js"></script>







  <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  <script src="//cdn.bootcss.com/scrollReveal.js/3.0.5/scrollreveal.js"></script>
  <script src="/js/animate.js"></script>

  </div>
</body>
</html>